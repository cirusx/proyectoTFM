<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Crear Offerta</title>
</head>
<body>
	<div class="container">
		<div id="createofferbox"
			class="sgpfc-registerbox col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
			<div class="panel sgpfc-loginbox-panel">
				<div class="panel-heading sgpfc-loginbox-heading">
					<div class="panel-title sgpfc-loginbox-title">Crear Oferta</div>
				</div>
				<div class="sgpfc-loginbox-panelbody panel-body">
					<form id="createofferform" class="form-horizontal" role="form"
						ng-submit="createOffer()">
						<div id="createofferalert" style="display: none"
							class="alert alert-danger">
							<p>Error:</p>
							<span></span>
						</div>
						<div class="form-group">
							<label for="name" class="col-md-3 control-label">Nombre</label>
							<div class="col-md-9">
								<div class="input-group col-xs-12">
									<input id="name" type="text" class="form-control" name="name"
										value="" aria-label="..." placeholder="Nombre"
										ng-model="offer.offerName" required>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label for="description" class="col-md-3 control-label">Descripción</label>
							<div class="col-md-9">
								<div class="input-group col-xs-12">
									<textarea id="description" type="text"
										class="sgpfc-createofferbox-description form-control"
										name="description" value="" aria-label="..."
										placeholder="Descripción" ng-model="offer.offerDescription"
										required> </textarea>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label for="inputImage" class="col-md-3 control-label">Imagen</label>
							<div class="col-md-9">
								<div class="input-group image-preview col-xs-12">
									<input type="text" class="form-control image-preview-filename"
										disabled="disabled">
									<!-- don't give a name === doesn't send on POST/GET -->
									<span class="input-group-btn"> <!-- image-preview-clear button -->
										<button type="button"
											class="btn btn-default image-preview-clear"
											style="display: none;">
											<span class="glyphicon glyphicon-remove"></span> Eliminar
										</button> <!-- image-preview-input -->
										<div class="btn btn-default image-preview-input">
											<span class="glyphicon glyphicon-folder-open"></span> <span
												class="image-preview-input-title">Cargar Imagen</span> <input
												type="file" accept="image/png, image/jpeg, image/gif"
												class="image-preview-input-file" name="input-file-preview" />
											<!-- rename it -->
										</div>
									</span>
								</div>
								<!-- /input-group image-preview [TO HERE]-->
								<script type="text/javascript">
                                    	$(document).on('click', '#close-preview', function(){ 
    										$('.image-preview').popover('hide');
    										// Hover befor close the preview
    										$('.image-preview').hover(
        										function () {
           											$('.image-preview').popover('show');
        										}, 
         										function () {
           											$('.image-preview').popover('hide');
        										}
   											 );    
										});
										$(function() {
    										// Create the close button
    										var closebtn = $('<button/>', {
        										type:"button",
        										text: 'x',
        										id: 'close-preview',
        										style: 'font-size: initial;',
    										});
    										closebtn.attr("class","close pull-right");
    										// Set the popover default content
    										$('.image-preview').popover({
        										trigger:'manual',
        										html:true,
        										title: "<strong>Preview</strong>"+$(closebtn)[0].outerHTML,
        										content: "There's no image",
        										placement:'bottom'
    										});
    									// Clear event
    									$('.image-preview-clear').click(function(){
        									$('.image-preview').attr("data-content","").popover('hide');
        									$('.image-preview-filename').val("");
        									$('.image-preview-clear').hide();
        									$('.image-preview-input input:file').val("");
        									$(".image-preview-input-title").text("Browse"); 
    									}); 
    									// Create the preview image
    									$(".image-preview-input input:file").change(function (){     
        									var img = $('<img/>', {
            									id: 'dynamic',
            									width:250,
           										height:200
        									});      
        									var file = this.files[0];
        									var reader = new FileReader();
        									// Set preview image into the popover data-content
        									reader.onload = function (e) {
            									$(".image-preview-input-title").text("Change");
            									$(".image-preview-clear").show();
           										$(".image-preview-filename").val(file.name);            
            									img.attr('src', e.target.result);
            									$(".image-preview").attr("data-content",$(img)[0].outerHTML).popover("show");
        									}        
        									reader.readAsDataURL(file);
    									});  
									});
								</script>
							</div>
						</div>
						<div class="form-group">
							<div class="col-md-3 control-label"></div>
							<div class="col-md-9">
								<div class="input-group col-xs-12">
								
									<input class="checkbox-inline" id="offerWithLimit"
										ng-model="offer.offerWithLimit" type="checkbox"
										onchange="toggleStatus()">
								
								<label for="offerWithLimit" class="control-label sgpfc-createofferbox-temporaloffer"> Oferta
								Temporal</label>
								</div>
							</div>
						</div>
						<div class="form-group">
							<label for="dt" class="col-md-3 control-label">Fecha
								Límite</label>
							<div class="col-md-9">
								<div
									class="input-group date sgpfc-createofferform-datelimitinput col-xs-12"
									id="dt">
									<span class="input-group-addon"> <span
										class="glyphicon glyphicon-calendar"></span>
									</span> <input type="datetime" class="form-control"
										ng-model="offer.offerTimeLimit" disabled="disabled" />
								</div>
							</div>
						</div>
						<script type="text/javascript"> 
 							$(function() {
 								$('#dt').datetimepicker(
 		 							{
 										locale : 'es'
									});
 							});
 						</script>
						<div class="form-group">
							<div class="sgpfc-recoverypasswordbox-button col-xs-offset-3 col-xs-9">
								<button id="btn-recoverpassword" type="submit"
									class="btn sgpfc-btn-primary btn-block">
									<i class="icon-hand-right"></i>Crear Oferta
								</button>
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
</body>
</html>